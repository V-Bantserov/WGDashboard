import{o as L,r as $,c as a,a as e,b as s,d as c,e as b,t as p,f as o,_ as y,D as w,w as d,T as M,n as S,u as N,i as T,g as W,G,h as A,W as V,j as v,F as D,k as H,l as x,m as k,p as I,S as O}from"./index-BtR8u1Yc.js";import{L as g}from"./localeText-CcPMTEBg.js";import{M as U}from"./message-BehwAQS7.js";import"./dayjs.min-CKNp_sHT.js";const j={class:"peerSettingContainer w-100 h-100 position-absolute top-0 start-0 overflow-y-scroll"},z={class:"container d-flex h-100 w-100"},B={class:"m-auto modal-dialog-centered dashboardModal"},R={class:"card rounded-3 shadow flex-grow-1"},F={class:"card-header bg-transparent d-flex align-items-center gap-2 border-0 p-4 pb-2"},q={class:"mb-0"},E={class:"card-body px-4 pb-4 d-flex flex-column gap-2"},P={class:"card text-decoration-none",target:"_blank",role:"button",href:"https://discord.gg/72TwzjeuWm"},J={class:"card-body d-flex gap-4 align-items-center"},Y={class:"d-flex align-items-center"},K={class:"badge rounded-pill text-bg-primary ms-2"},Q={key:0,class:"spinner-border spinner-border-sm",style:{width:"0.7rem",height:"0.7rem"}},X={key:1},Z={class:"text-muted"},ee={class:"card text-decoration-none",href:"https://docs.wgdashboard.dev/",target:"_blank"},te={class:"card-body d-flex gap-4 align-items-center"},se={class:"mb-0"},oe={class:"text-muted"},ae={__name:"helpModal",setup(u){const t=$(!0),f=$(void 0);return L(()=>{t.value=!0,fetch("https://discord.com/api/guilds/1276818723637956628/widget.json").then(n=>n.json()).then(n=>{f.value=n,t.value=!1}).catch(()=>{t.value=!1})}),(n,r)=>(o(),a("div",j,[e("div",z,[e("div",B,[e("div",R,[e("div",F,[e("h4",q,[s(g,{t:"Help"})]),e("button",{type:"button",class:"btn-close ms-auto",onClick:r[0]||(r[0]=l=>n.$emit("close"))})]),e("div",E,[e("a",P,[e("div",J,[r[3]||(r[3]=e("h1",{class:"mb-0"},[e("i",{class:"bi bi-discord"})],-1)),e("div",null,[e("div",Y,[r[2]||(r[2]=e("h5",{class:"mb-0"}," Discord Server ",-1)),e("span",K,[t.value?(o(),a("span",Q)):c("",!0),f.value!==void 0&&!t.value?(o(),a("span",X,[r[1]||(r[1]=e("i",{class:"bi bi-person-fill me-2"},null,-1)),b(p(f.value.presence_count)+" Online ",1)])):c("",!0)])]),e("small",Z,[s(g,{t:"Join our Discord server for quick help or chat about WGDashboard!"})])])])]),e("a",ee,[e("div",te,[r[4]||(r[4]=e("h1",{class:"mb-0"},[e("i",{class:"bi bi-hash"})],-1)),e("div",null,[e("h5",se,[s(g,{t:"Official Documentation"})]),e("small",oe,[s(g,{t:"Official documentation contains User Guides and more..."})])])])])])])])])]))}},ne={key:"header",class:"shadow"},ie={class:"p-3 d-flex gap-2 flex-column"},re={class:"d-flex text-body"},le={class:"d-flex flex-column align-items-start gap-1"},de={class:"mb-0"},ue={class:"mb-0"},ce={class:"list-group"},me={href:"https://docs.wgdashboard.dev/",target:"_blank",class:"list-group-item list-group-item-action d-flex align-items-center"},ge={target:"_blank",role:"button",href:"https://discord.gg/72TwzjeuWm",class:"list-group-item list-group-item-action d-flex align-items-center"},fe={__name:"agentModal",emits:["close"],setup(u,{emit:t}){const f=t,n=w();return(r,l)=>(o(),a("div",{class:S(["agentContainer m-2 rounded-3 d-flex flex-column text-body",{enabled:N(n).HelpAgent.Enable}])},[s(M,{name:"agent-message"},{default:d(()=>[e("div",ne,[e("div",ie,[e("div",re,[e("div",le,[e("h5",de,[s(g,{t:"Help"})])]),e("a",{role:"button",class:"ms-auto text-body",onClick:l[0]||(l[0]=i=>f("close"))},[...l[1]||(l[1]=[e("h5",{class:"mb-0"},[e("i",{class:"bi bi-x-lg"})],-1)])])]),e("p",ue,[s(g,{t:"You can visit our: "})]),e("div",ce,[e("a",me,[l[2]||(l[2]=e("i",{class:"bi bi-book-fill"},null,-1)),s(g,{class:"ms-auto",t:"Official Documentation"})]),e("a",ge,[l[3]||(l[3]=e("i",{class:"bi bi-discord"},null,-1)),s(g,{class:"ms-auto",t:"Discord Server"})])])])])]),_:1})],2))}},_e=y(fe,[["__scopeId","data-v-f37f608d"]]),ve={name:"navbar",components:{HelpModal:ae,LocaleText:g,AgentModal:_e},setup(){const u=V(),t=w();return{wireguardConfigurationsStore:u,dashboardConfigurationStore:t}},data(){return{updateAvailable:!1,updateMessage:"Checking for update...",updateUrl:"",openHelpModal:!1,openAgentModal:!1}},computed:{resolvedTheme(){return A(this.dashboardConfigurationStore.Configuration.Server.dashboard_theme)},getActiveCrossServer(){if(this.dashboardConfigurationStore.ActiveServerConfiguration)return new URL(this.dashboardConfigurationStore.CrossServerConfiguration.ServerList[this.dashboardConfigurationStore.ActiveServerConfiguration].host)}},async mounted(){T(),await this.wireguardConfigurationsStore.getConfigurations(),await W("/api/getDashboardUpdate",{},u=>{u.status?(u.data&&(this.updateAvailable=!0,this.updateUrl=u.data),this.updateMessage=u.message):(this.updateMessage=G("Failed to check available update"),console.log(`Failed to get update: ${u.message}`))}),this.wireguardConfigurationsStore.ConfigurationListInterval=setInterval(()=>{this.wireguardConfigurationsStore.getConfigurations()},1e4)}},he=["data-bs-theme"],be={id:"sidebarMenu",class:"bg-body-tertiary sidebar border h-100 rounded-3 shadow overflow-y-scroll"},pe={class:"sidebar-sticky"},xe={class:"text-white text-center m-0 py-3 mb-2 btn-brand"},Ce={key:0,class:"ms-auto"},Se={class:"nav flex-column px-2 gap-1"},ke={class:"nav-item"},ye={class:"nav-item"},we={key:0,class:"nav-item"},$e={key:1,class:"nav-item"},Me={key:2,class:"nav-item"},Te={class:"sidebar-heading px-3 mt-3 mb-1 text-muted text-center"},Ae={class:"nav flex-column px-2 gap-1"},De={class:"nav-item"},He={class:"sidebar-heading px-3 mt-3 mb-1 text-muted text-center"},Le={class:"nav flex-column px-2 gap-1"},Ne={key:0,class:"nav-item"},We={key:1,class:"nav-item"},Ge={key:2,class:"nav-item"},Ve={key:3,class:"nav-item"},Ie={class:"nav flex-column px-2 mb-3"},Oe={class:"nav-item"},Ue={class:"nav-item",style:{"font-size":"0.8rem"}},je=["href"],ze={class:"nav-link text-muted rounded-3"},Be={key:1,class:"nav-link text-muted rounded-3"};function Re(u,t,f,n,r,l){const i=v("LocaleText"),m=v("RouterLink"),C=v("HelpModal"),h=v("AgentModal");return o(),a("div",{class:S(["col-md-3 col-lg-2 d-md-block p-2 navbar-container bg-transparent",{active:this.dashboardConfigurationStore.ShowNavBar}]),"data-bs-theme":l.resolvedTheme},[e("nav",be,[e("div",pe,[e("div",xe,[t[5]||(t[5]=e("h5",{class:"mb-0"}," WGDashboard ",-1)),l.getActiveCrossServer!==void 0?(o(),a("small",Ce,[t[4]||(t[4]=e("i",{class:"bi bi-hdd-rack-fill me-2"},null,-1)),b(p(l.getActiveCrossServer.host),1)])):c("",!0)]),e("ul",Se,[e("li",ke,[s(m,{class:"nav-link rounded-3",to:"/","exact-active-class":"active"},{default:d(()=>[t[6]||(t[6]=e("i",{class:"bi bi-house me-2"},null,-1)),s(i,{t:"Home"})]),_:1})]),e("li",ye,[s(m,{class:"nav-link rounded-3",to:"/settings","active-class":"active"},{default:d(()=>[t[7]||(t[7]=e("i",{class:"bi bi-gear me-2"},null,-1)),s(i,{t:"Settings"})]),_:1})]),String(n.dashboardConfigurationStore.Configuration.Server.menu_clients)==="true"?(o(),a("li",we,[s(m,{class:"nav-link rounded-3",to:"/clients","active-class":"active"},{default:d(()=>[t[8]||(t[8]=e("i",{class:"bi bi-people me-2"},null,-1)),s(i,{t:"Clients"})]),_:1})])):c("",!0),String(n.dashboardConfigurationStore.Configuration.Server.menu_webhooks)==="true"?(o(),a("li",$e,[s(m,{class:"nav-link rounded-3",to:"/webhooks","active-class":"active"},{default:d(()=>[t[9]||(t[9]=e("i",{class:"bi bi-postcard me-2"},null,-1)),s(i,{t:"Webhooks"})]),_:1})])):c("",!0),String(n.dashboardConfigurationStore.Configuration.Server.menu_help)==="true"?(o(),a("li",Me,[e("a",{class:"nav-link rounded-3",role:"button",onClick:t[0]||(t[0]=_=>r.openAgentModal=!0)},[t[10]||(t[10]=e("i",{class:"bi bi-question-circle me-2"},null,-1)),s(i,{t:"Help"})])])):c("",!0)]),t[13]||(t[13]=e("hr",{class:"text-body my-2"},null,-1)),e("h6",Te,[s(i,{t:"WireGuard Configurations"})]),e("ul",Ae,[(o(!0),a(D,null,H(this.wireguardConfigurationsStore.sortConfigurations,_=>(o(),a("li",De,[s(m,{to:"/configuration/"+_.Name+"/peers",class:"nav-link nav-conf-link rounded-3","active-class":"active"},{default:d(()=>[e("span",{class:S(["dot me-2",{active:_.Status}])},null,2),b(" "+p(_.Name),1)]),_:2},1032,["to"])]))),256))]),t[14]||(t[14]=e("hr",{class:"text-body my-2"},null,-1)),e("h6",He,[s(i,{t:"Tools"})]),e("ul",Le,[String(n.dashboardConfigurationStore.Configuration.Server.menu_system_status)==="true"?(o(),a("li",Ne,[s(m,{to:"/system_status",class:"nav-link rounded-3","active-class":"active"},{default:d(()=>[s(i,{t:"System Status"})]),_:1})])):c("",!0),String(n.dashboardConfigurationStore.Configuration.Server.menu_health_monitor)==="true"?(o(),a("li",We,[s(m,{to:"/settings/health_monitor",class:"nav-link rounded-3","active-class":"active"},{default:d(()=>[s(i,{t:"Peer Health Monitor"})]),_:1})])):c("",!0),String(n.dashboardConfigurationStore.Configuration.Server.menu_traceroute)==="true"?(o(),a("li",Ge,[s(m,{to:"/traceroute",class:"nav-link rounded-3","active-class":"active"},{default:d(()=>[s(i,{t:"Traceroute"})]),_:1})])):c("",!0),String(n.dashboardConfigurationStore.Configuration.Server.menu_ping)==="true"?(o(),a("li",Ve,[s(m,{to:"/ping",class:"nav-link rounded-3","active-class":"active"},{default:d(()=>[s(i,{t:"Ping"})]),_:1})])):c("",!0)]),t[15]||(t[15]=e("hr",{class:"text-body my-2"},null,-1)),e("ul",Ie,[e("li",Oe,[e("a",{class:"nav-link text-danger rounded-3",onClick:t[1]||(t[1]=_=>this.dashboardConfigurationStore.signOut()),role:"button",style:{"font-weight":"bold"}},[t[11]||(t[11]=e("i",{class:"bi bi-box-arrow-left me-2"},null,-1)),s(i,{t:"Sign Out"})])]),e("li",Ue,[this.updateAvailable?(o(),a("a",{key:0,href:this.updateUrl,class:"text-decoration-none rounded-3",target:"_blank"},[e("small",ze,[s(i,{t:this.updateMessage},null,8,["t"]),t[12]||(t[12]=b(" (",-1)),s(i,{t:"Current Version:"}),b(" "+p(n.dashboardConfigurationStore.Configuration.Server.version)+") ",1)])],8,je)):(o(),a("small",Be,[s(i,{t:this.updateMessage},null,8,["t"]),b(" ("+p(n.dashboardConfigurationStore.Configuration.Server.version)+") ",1)]))])])])]),s(k,{name:"zoom"},{default:d(()=>[this.openHelpModal?(o(),x(C,{key:0,onClose:t[2]||(t[2]=_=>{r.openHelpModal=!1})})):c("",!0)]),_:1}),s(k,{name:"slideIn"},{default:d(()=>[this.openAgentModal?(o(),x(h,{key:0,onClose:t[3]||(t[3]=_=>r.openAgentModal=!1)})):c("",!0)]),_:1})],10,he)}const Fe=y(ve,[["render",Re],["__scopeId","data-v-d5d50b57"]]),qe={name:"index",components:{Message:U,Navbar:Fe},async setup(){return{dashboardConfigurationStore:w()}},computed:{resolvedTheme(){return A(this.dashboardConfigurationStore.Configuration.Server.dashboard_theme)},getMessages(){return this.dashboardConfigurationStore.Messages.filter(u=>u.show)}},mounted(){T()}},Ee=["data-bs-theme"],Pe={class:"row h-100"},Je={class:"col-md-9 col-lg-10 overflow-y-scroll mb-0 pt-2"},Ye={class:"messageCentre text-body position-absolute d-flex"};function Ke(u,t,f,n,r,l){const i=v("Navbar"),m=v("RouterView"),C=v("Message");return o(),a("div",{class:"container-fluid flex-grow-1 main","data-bs-theme":l.resolvedTheme},[e("div",Pe,[s(i),e("main",Je,[(o(),x(O,null,{default:d(()=>[s(m,null,{default:d(({Component:h})=>[s(k,{name:"fade2",mode:"out-in",appear:""},{default:d(()=>[(o(),x(I(h)))]),_:2},1024)]),_:1})]),_:1})),e("div",Ye,[s(M,{name:"message",tag:"div",class:"position-relative flex-sm-grow-0 flex-grow-1 d-flex align-items-end ms-sm-auto flex-column gap-2"},{default:d(()=>[(o(!0),a(D,null,H(l.getMessages.slice().reverse(),h=>(o(),x(C,{message:h,key:h.id},null,8,["message"]))),128))]),_:1})])])])],8,Ee)}const tt=y(qe,[["render",Ke],["__scopeId","data-v-df688837"]]);export{tt as default};
