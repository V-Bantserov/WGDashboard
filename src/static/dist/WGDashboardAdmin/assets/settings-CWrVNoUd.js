import{_ as m,B as h,D as f,C as g,c as l,a as t,q as r,b as d,j as u,A as c,n as w,t as P,f as n,d as F,e as $,v as V,l as v,F as y,k as D,w as A}from"./index-BtR8u1Yc.js";import{P as S}from"./peersDefaultSettingsInput-D3ELGpX5.js";import{L as k}from"./localeText-CcPMTEBg.js";import{D as C,a as T}from"./dashboardSettingsWireguardConfigurationAutostart-hiFXCMME.js";import{D as N,a as L,b as U,c as M,_ as R}from"./dashboardEmailSettings-CSoZ5nUW.js";import"./dayjs.min-CKNp_sHT.js";import"./vue-datepicker-CEMQiOZm.js";import"./index-BZpQ6DeK.js";const B={name:"accountSettingsInputUsername",components:{LocaleText:k},props:{targetData:String,title:String},setup(){const e=f(),s=`input_${g()}`;return{store:e,uuid:s}},data(){return{value:"",invalidFeedback:"",showInvalidFeedback:!1,isValid:!1,timeout:void 0,changed:!1,updating:!1}},mounted(){this.value=this.store.Configuration.Account[this.targetData]},methods:{async useValidation(e){this.changed&&(this.updating=!0,await h("/api/updateDashboardConfigurationItem",{section:"Account",key:this.targetData,value:this.value},s=>{s.status?(this.isValid=!0,this.showInvalidFeedback=!1,this.store.Configuration.Account[this.targetData]=this.value,clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.isValid=!1,5e3)):(this.isValid=!1,this.showInvalidFeedback=!0,this.invalidFeedback=s.message),this.changed=!1,this.updating=!1}))}}},W={class:"form-group mb-2"},j=["for"],K=["id","disabled"],E={class:"invalid-feedback"};function G(e,s,b,_,o,p){const i=u("LocaleText");return n(),l("div",W,[t("label",{for:this.uuid,class:"text-muted mb-1"},[t("strong",null,[t("small",null,[d(i,{t:this.title},null,8,["t"])])])],8,j),r(t("input",{type:"text",class:w(["form-control",{"is-invalid":o.showInvalidFeedback,"is-valid":o.isValid}]),id:this.uuid,"onUpdate:modelValue":s[0]||(s[0]=a=>this.value=a),onKeydown:s[1]||(s[1]=a=>this.changed=!0),onBlur:s[2]||(s[2]=a=>p.useValidation()),disabled:this.updating},null,42,K),[[c,this.value]]),t("div",E,P(this.invalidFeedback),1)])}const q=m(B,[["render",G]]),O={name:"accountSettingsInputPassword",components:{LocaleText:k},props:{targetData:String,warning:!1,warningText:""},setup(){const e=f(),s=`input_${g()}`;return{store:e,uuid:s}},data(){return{value:{currentPassword:"",newPassword:"",repeatNewPassword:""},invalidFeedback:"",showInvalidFeedback:!1,isValid:!1,timeout:void 0}},methods:{async useValidation(){Object.values(this.value).find(e=>e.length===0)===void 0?this.value.newPassword===this.value.repeatNewPassword?await h("/api/updateDashboardConfigurationItem",{section:"Account",key:this.targetData,value:this.value},e=>{e.status?(this.isValid=!0,this.showInvalidFeedback=!1,this.store.Configuration.Account[this.targetData]=this.value,clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.isValid=!1,this.value={currentPassword:"",newPassword:"",repeatNewPassword:""}},5e3)):(this.isValid=!1,this.showInvalidFeedback=!0,this.invalidFeedback=e.message)}):(this.showInvalidFeedback=!0,this.invalidFeedback="New passwords does not match"):(this.showInvalidFeedback=!0,this.invalidFeedback="Please fill in all required fields.")}},computed:{passwordValid(){return Object.values(this.value).find(e=>e.length===0)===void 0&&this.value.newPassword===this.value.repeatNewPassword}}},z={class:"d-flex flex-column gap-2"},H={class:"row g-2"},J={class:"col-sm"},Q={class:"form-group"},X=["for"],Y=["id"],Z={key:0,class:"invalid-feedback d-block"},tt={class:"col-sm"},st={class:"form-group"},et=["for"],it=["id"],at={class:"col-sm"},ot={class:"form-group"},nt=["for"],dt=["id"],lt=["disabled"];function rt(e,s,b,_,o,p){const i=u("LocaleText");return n(),l("div",null,[t("h6",null,[d(i,{t:"Update Password"})]),t("form",z,[t("div",H,[t("div",J,[t("div",Q,[t("label",{for:"currentPassword_"+this.uuid,class:"text-muted mb-1"},[t("strong",null,[t("small",null,[d(i,{t:"Current Password"})])])],8,X),r(t("input",{type:"password",class:w(["form-control",{"is-invalid":o.showInvalidFeedback,"is-valid":o.isValid}]),autocomplete:"current-password","onUpdate:modelValue":s[0]||(s[0]=a=>this.value.currentPassword=a),id:"currentPassword_"+this.uuid},null,10,Y),[[c,this.value.currentPassword]]),o.showInvalidFeedback?(n(),l("div",Z,P(this.invalidFeedback),1)):F("",!0)])]),t("div",tt,[t("div",st,[t("label",{for:"newPassword_"+this.uuid,class:"text-muted mb-1"},[t("strong",null,[t("small",null,[d(i,{t:"New Password"})])])],8,et),r(t("input",{type:"password",class:w(["form-control",{"is-invalid":o.showInvalidFeedback,"is-valid":o.isValid}]),autocomplete:"new-password","onUpdate:modelValue":s[1]||(s[1]=a=>this.value.newPassword=a),id:"newPassword_"+this.uuid},null,10,it),[[c,this.value.newPassword]])])]),t("div",at,[t("div",ot,[t("label",{for:"repeatNewPassword_"+this.uuid,class:"text-muted mb-1"},[t("strong",null,[t("small",null,[d(i,{t:"Repeat New Password"})])])],8,nt),r(t("input",{type:"password",class:w(["form-control",{"is-invalid":o.showInvalidFeedback,"is-valid":o.isValid}]),autocomplete:"new-password","onUpdate:modelValue":s[2]||(s[2]=a=>this.value.repeatNewPassword=a),id:"repeatNewPassword_"+this.uuid},null,10,dt),[[c,this.value.repeatNewPassword]])])])]),t("button",{disabled:!this.passwordValid,class:"ms-auto btn bg-success-subtle text-success-emphasis border-1 border-success-subtle rounded-3 shadow-sm",onClick:s[3]||(s[3]=a=>this.useValidation())},[s[4]||(s[4]=t("i",{class:"bi bi-save2-fill me-2"},null,-1)),d(i,{t:"Save"})],8,lt)])])}const ut=m(O,[["render",rt]]),ct={name:"dashboardSettingsInputIPAddressAndPort",props:{},setup(){const e=f(),s=`input_${g()}`;return{store:e,uuid:s}},data(){return{app_ip:"",app_port:"",invalidFeedback:"",showInvalidFeedback:!1,isValid:!1,timeout:void 0,changed:!1,updating:!1}},mounted(){this.app_ip=this.store.Configuration.Server.app_ip,this.app_port=this.store.Configuration.Server.app_port},methods:{async useValidation(){this.changed&&await h("/api/updateDashboardConfigurationItem",{section:"Server",key:this.targetData,value:this.value},e=>{e.status?(this.isValid=!0,this.showInvalidFeedback=!1,this.store.Configuration.Account[this.targetData]=this.value,clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.isValid=!1,5e3)):(this.isValid=!1,this.showInvalidFeedback=!0,this.invalidFeedback=e.message)})}}},pt={class:"invalid-feedback d-block mt-0"},ht={class:"row"},mt={class:"form-group mb-2 col-sm"},ft=["for"],bt=["id"],_t={class:"form-group col-sm"},vt=["for"],wt=["id"];function gt(e,s,b,_,o,p){return n(),l("div",null,[t("div",pt,P(this.invalidFeedback),1),t("div",ht,[t("div",mt,[t("label",{for:"app_ip_"+this.uuid,class:"text-muted mb-1"},[...s[2]||(s[2]=[t("strong",null,[t("small",null,"Dashboard IP Address")],-1)])],8,ft),r(t("input",{type:"text",class:"form-control mb-2",id:"app_ip_"+this.uuid,"onUpdate:modelValue":s[0]||(s[0]=i=>this.app_ip=i)},null,8,bt),[[c,this.app_ip]]),s[3]||(s[3]=t("div",{class:"px-2 py-1 text-warning-emphasis bg-warning-subtle border border-warning-subtle rounded-2 d-inline-block"},[t("small",null,[t("i",{class:"bi bi-exclamation-triangle-fill me-2"}),t("code",null,"0.0.0.0"),$(" means it can be access by anyone with your server IP Address.")])],-1))]),t("div",_t,[t("label",{for:"app_port_"+this.uuid,class:"text-muted mb-1"},[...s[4]||(s[4]=[t("strong",null,[t("small",null,"Dashboard Port")],-1)])],8,vt),r(t("input",{type:"text",class:"form-control mb-2",id:"app_port_"+this.uuid,"onUpdate:modelValue":s[1]||(s[1]=i=>this.app_port=i)},null,8,wt),[[c,this.app_port]])])]),s[5]||(s[5]=t("button",{class:"btn btn-success btn-sm fw-bold rounded-3"},[t("i",{class:"bi bi-floppy-fill me-2"}),$("Update Dashboard Settings & Restart ")],-1))])}const kt=m(ct,[["render",gt]]),$t={name:"accountSettingsMFA",components:{LocaleText:k},setup(){const e=f(),s=`input_${g()}`;return{store:e,uuid:s}},data(){return{status:!1}},mounted(){this.status=this.store.Configuration.Account.enable_totp},methods:{async resetMFA(){await h("/api/updateDashboardConfigurationItem",{section:"Account",key:"totp_verified",value:"false"},async e=>{await h("/api/updateDashboardConfigurationItem",{section:"Account",key:"enable_totp",value:"false"},s=>{s.status&&this.$router.push("/2FASetup")})})}}},Pt={class:"d-flex align-items-center"},xt={class:"form-check form-switch"},Ft={for:"allowMFAKeysSwitch"};function It(e,s,b,_,o,p){const i=u("LocaleText");return n(),l("div",null,[t("div",Pt,[t("div",xt,[r(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":s[0]||(s[0]=a=>this.status=a),role:"switch",id:"allowMFAKeysSwitch"},null,512),[[V,this.status]]),t("label",Ft,[this.status?(n(),v(i,{key:0,t:"Enabled"})):(n(),v(i,{key:1,t:"Disabled"}))])]),this.status?(n(),l("button",{key:0,class:"btn bg-warning-subtle text-warning-emphasis border-1 border-warning-subtle ms-auto rounded-3 shadow-sm",onClick:s[1]||(s[1]=a=>this.resetMFA())},[s[2]||(s[2]=t("i",{class:"bi bi-shield-lock-fill me-2"},null,-1)),this.store.Configuration.Account.totp_verified?(n(),v(i,{key:0,t:"Reset"})):(n(),v(i,{key:1,t:"Setup"})),s[3]||(s[3]=$(" MFA ",-1))])):F("",!0)])])}const Vt=m($t,[["render",It]]),yt={name:"settings",components:{DashboardEmailSettings:R,DashboardSettingsWireguardConfigurationAutostart:T,DashboardIPPortInput:M,DashboardLanguage:U,LocaleText:k,AccountSettingsMFA:Vt,DashboardAPIKeys:L,DashboardSettingsInputIPAddressAndPort:kt,DashboardTheme:N,DashboardSettingsInputWireguardConfigurationPath:C,AccountSettingsInputPassword:ut,AccountSettingsInputUsername:q,PeersDefaultSettingsInput:S},setup(){return{dashboardConfigurationStore:f()}},data(){return{activeTab:"WGDashboard",tabs:[{id:"",title:"WGDashboard Settings"},{id:"peers_settings",title:"Peers Settings"},{id:"wireguard_settings",title:"WireGuard Configuration Settings"},{id:"admin_users",title:"Admin Users"}]}}},Dt={class:"mt-md-5 mt-3 text-body mb-3"},At={class:"container-md d-flex flex-column gap-3"},St={class:"border-bottom pb-3"},Ct={class:"nav nav-pills nav-justified align-items-center gap-2"},Tt={class:"nav-item"},Nt={class:"my-2"};function Lt(e,s,b,_,o,p){const i=u("LocaleText"),a=u("RouterLink"),I=u("RouterView");return n(),l("div",Dt,[t("div",At,[t("div",St,[t("ul",Ct,[(n(!0),l(y,null,D(this.tabs,x=>(n(),l("li",Tt,[d(a,{to:{name:x.title},class:"nav-link rounded-3","exact-active-class":"active",role:"button"},{default:A(()=>[t("h6",Nt,[d(i,{t:x.title},null,8,["t"])])]),_:2},1032,["to"])]))),256))])]),d(I)])])}const Gt=m(yt,[["render",Lt]]);export{Gt as default};
